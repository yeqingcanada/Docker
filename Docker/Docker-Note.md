# Table of contents

- [Introduction To Docker](#introduction-to-docker)
  - [Virtual Machines vs Containers](#virtual-machines-vs-containers)
  - [Installing Docker](#installing-docker)
  - [Docker in Action](#docker-in-action)
  - [Summary](#summary)
  - [A Note for Windows Users](#a-note-for-windows-users)
- [The Linux Command Line](#the-linux-command-line)
  - [Running Linux](#running-linux)
  - [Managing Packages](#managing-packages)
  - [Linux File System](#linux-file-system)
  - [Navigating the File System](#navigating-the-file-system)

# Introduction To Docker

## Virtual Machines vs Containers
Containers 与 Virtual Machines 很类似，都是独立运行的环境  
但是 Virtual Machines 需要的资源大，启动慢。内存会被分成多份给多个虚拟机  
Containers 也可以提供隔离的环境，但是它不需要全套的操作系统，所有的containers 在同一台电脑上，share 操作系统，而非分割。  

## Installing Docker
docker version  
version 20.10.5  
turn on Hyper-V and Containers Windows features, go to settings, and type in features, mark Hyper-V and Containers features.  

## Docker in Action  
```docker
<!-- image:tag, start from a base image. base image有很多file，我们take这些files，在此基础上增加file。我们可以选择linux image，在此基础上build node，也可以直接选择node image，这是docker建好的。可以去docker hub找到相关的image的信息.不同的image是为了不同的distributions（发布） of linux。tag就是为了标明我想用哪个linux的发布。-->
FROM node:alpine
<!-- 点: all the file, to app directory -->
COPY . /app
WORKDIR /app
CMD node app.js
```
- 建立一个docker image：-t是tag，点是目前的directory的意思，specify where docker can find a docker file  
    - docker build -t hello-docker .

- 查看所有的images  
    - docker image ls/ docker images  

- run image  
    - docker run hello-docker

## Summary  
### Terms
Client/server architecture  
Hypervisors  
Docker daemon (engine)  
### Summary
- A virtual machine is an abstraction of hardware resources. Using hypervisors we can create and manage virtual machines. The most popular hypervisors are VirtualBox, VMware and Hyper-v (Windows-only).
- Virtual machines are very resource intensive and slow to start. Containers are very lightweight and start quickly because they share the kernel of the host (which is already started).
- Docker uses client/server architecture. It has a client component that talks to the server using a RESTful API. The server is also called the Docker engine (or daemon) runs in the background and is responsible for doing the actual work.

## A Note for Windows Users  
Windows 10+ ships with a Linux kernel. So when using Docker, you can choose between Windows or Linux containers. Windows containers (processes) need to talk to the Windows kernel under the hood. Linux containers need the Linux kernel.

These are essentially two different isolated worlds. You can choose between these two worlds by right-clicking on the Docker icon in the notification tray (in the bottom status bar).

Remember: the images and containers in the Windows world are invisible to the Linux world. You'd need Windows containers only if you need an image that starts from Windows.

# The Linux Command Line

## Running Linux  
- 首先需要将ubuntu的image下载  
    - docker pull ubuntu  
- 还有更简便的办法,直接run，如果没有docker会直接先pull  
    - docker run ubuntu
- see the list of running prcesses or running containers  
    - docker ps  
- 查看所有的container，包括那些stopped  
    - docker ps -a  
- run interactive. a shell is a program that takes our commands and passes them to the operationg system for excution  
    - docker run -it ubuntu
- shell promp: root is currently login user, after the @ assign we have the name of the machine, this container has this ID, which is automatically generated by docker. / is where we are in the file system.#/@ means we have the highest privilegesor or other level   
    - root@925cec6dbae3:/# 
- the location of this shell program  
    - echo $0
- history command, run the second history  
    - history
    - !2

## Managing Packages
the managing packages software: npm/yarn/pip    
apt: advanced package tool, the linux popular   
nano: a basic editor for linux
### apt
- apt install nano
- apt list (list all the packages in the linux package database)
- apt update (update the package database, before install package always update firstly)
- apt remove nano (uninstall package)

## Linux File System
file and directory are organized in a tree in hierarchical
### Windows
- C:\
    - Program Files
    - Windows
### Linux
- /
    - bin (binarys and programs)
    - boot (all the file related to booting)
    - dev (the file that are needed to access devices)
    - etc (editable text configuration, configuration files)
    - home (this is where home directories for users are stored. each user will have a home directory here)
    - root (home directory for root user, only root user can access this dir)
    - lib (library files)
    - var (variable, files that are updated frequently, like loc files, application data)
    - pro (represent running processes)

## Navigating the File System
- pwd (print working directory, where we are in the file system)
- ls (list)
    - ls -1 (竖排显示)
    - ls -l (long list, more details)  
        lrwxrwxrwx   1 root root    7 Nov  1 21:15 bin -> usr/bin  
        - lrwxrwxrwx: the permissions of this file or directory
        - root: user own this fie
        - 7:  size
        - 21:15: date
- cd etc/a + tab (show all the files with 'a' beginning in the folder etc)
- cd ../.. (go to two level up)
- cd ~ (go to home directory) 
- blue represent directory and white is file

## Manipulating Files and Directories
- mkdir (create a new directory)
- mv test docker (rename/move to somewhere else)
- touch hello.txt file1.txt file2.txt (create a new file)
- rm file*
- rm -r docker/ (remove directory)

## Editing and Viewing Files
- cat filename (see the content of a file)(concatenate or combine multiple files)
- more /etc/adduser.conf (for long file. space: jump to next page, enter: line by line)
- less /etc/adduser.conf (more can only go down, less can use arrow button to go up and down. Q: exit)
- head -n 5 /etc/adduser.conf (view first 5 few lines)
- tail -n 5 /etc/adduser.conf

## Redirection
standard input represent the keyboard  
standard output represent the screen  
redirection is to change the source of input and output  
- cat file1.txt > file2.txt (read file1's content not to screen but write it to file2)
- echo whatever > whatever.txt (echo is write something to screen)

## Searching for Text
- grep whatever whatever.txt (global regular expression print)
    - grep -i (case insensitive)